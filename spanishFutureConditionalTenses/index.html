<html>
	<head>
		<title>
			Spanish Future and Conditional Tenses
		</title>
		<style>
			.disabled, .disabled * {
				display: none;
			}
			* {
				margin: 0;
				padding: 0;
				border: none;
				cursor: default;
			}
			input {
				cursor: text;
			}
			*::selection {
				background-color: RGB(0,128,255);
			}
			p, h1, h2, h3, h4, h5, h6, button, input {
				font-family: "Arial", sans-serif;
			}
			button:hover, input:hover, textarea:hover, button:focus, input:focus, textarea:focus, button:active {
				/*Disables the default styling applied by some browsers on elements with the "hover," "active," and "focus" pseudoclass enabled*/
				outline: none;
			}
			button:hover, #configuration > button:hover, #problems[id$=Problems] button:hover, input:hover, #problems[id$=Problems] input:hover, textarea:hover {
				/*#configuration > button:hover is used to account for the other reference of #configuration > button having a higher precedence due to being a more specific selection*/
				background-color: RGB(230,230,230);
			}
			button:active, #configuration > button:active, #problems[id$=Problems] button:active, input:focus, #problems[id$=Problems] input:focus, textarea:focus {
				/*#configuration > button:active is used to account for the other reference of #configuration > button having a higher precedence due to being a more specific selection*/
				background-color: RGB(200,200,200);
			}
			.speakable {
				background-color: RGBA(0,128,255,0.75);
				display: inline-block;
			}
			.speakable.spoken {
				/*"spoken" class is applied when the element is currently being spoken*/
				background-color: RGB(0,128,255);
			}
			body {
				background-color: RGB(255,255,255);
			}
			#header {
				background-color: RGB(255,128,0);
				height: 10vh;
				width: 100vw;
				position: fixed;
				top: 0;
				left: 0;
			}
			#title {
				color: RGB(255,255,255);
				font-size: 4vh;
				width: 100%;
				position: absolute;
				top: 50%;
				transform: translateY(-50%);
				left: 2vw;
			}
			#data {
				height: 20vh;
				width: 100vw;
				position: fixed;
				top: 0;
				left: 0;
			}
			#ratioDiv {
				background-color: RGB(255,128,0);
				height: 10vh;
				width: 25vw;
				position: absolute;
				top: 10vh;
				right: 25vw;
			}
			#ratioCorrect {
				color: RGB(255,255,255);
				font-size: 5vh;
				width: 25vw;
				text-align: center;
				position: absolute;
				top: 50%;
				left: 0;
				transform: translateY(-50%);
				white-space: nowrap;
				overflow-wrap: normal;
				word-break: keep-all;
				hyphens: none;
			}
			#problems {
				height: 70vh;
				width: 100vw;
				position: fixed;
				top: 20vh;
				left: 0;
			}
			#problems > div {
				height: 62vh;
				width: calc(100vw - 8vh);
				position: absolute;
				top: 4vh;
				left: 4vh;
			}
			#audioContainer, #audioContainer * {
				display: none;
			}
			#guide {
				overflow-x: hidden;
				overflow-y: scroll;
			}
			#guide p, #guide h1, #guide h2, #guide h3, #guide h4, #guide h5, #guide h6 {
				color: RGB(255,128,0);
				overflow-wrap: break-word;
				word-break: break-word;
				hyphens: auto;
				white-space: normal;
				overflow: visible;
			}
			#guide p {
				font-size: 2vw;
				margin: 0 0 1vw 0;
			}
			#guide h1 {
				font-size: 6vw;
				margin: 0 0 3vw 0;
			}
			#guide h2 {
				font-size: 4vw;
				margin: 0 0 2vw 0;
			}
			#guide h3 {
				font-size: 3vw;
				margin: 0 0 1.5vw 0;
			}
			#guide h4 {
				font-size: 2.5vw;
				margin: 0 0 1.25vw 0;
			}
			#guide h5 {
				font-size: 2.25vw;
				margin: 0 0 1.125vw 0;
			}
			#guide h6 {
				font-size: 2.125vw;
				margin: 0 0 1.0625vw 0;
			}
			#configuration {
				background-color: RGB(255,128,0);
				height: 10vh;
				width: 50vw;
				position: fixed;
				bottom: 0;
				right: 0;
			}
			#configuration > button {
				background-color: RGB(255,255,255);
				color: RGB(255,128,0);
				height: 8vh;
				width: 8vw;
				position: absolute;
				top: 1vh;
				font-size: 1.5vh;
				border: 0;
			}
			#selectFutureConjugationProblems {
				right: calc(5vw / 3);
			}
			#selectConditionalConjugationProblems {
				right: calc(34vw / 3);
			}
			#selectFutureTranslationProblems {
				right: 21vw;
			}
			#selectConditionalTranslationProblems {
				right: calc(92vw / 3);
			}
			#viewGuide {
				right: calc(121vw / 3);
			}
			#problems div[id$=Problems] > * {
				position: absolute;
			}
			#problems div[id$=Problems] p, #problems div[id$=Problems] input, #problems div[id$=Problems] button, #problems div[id$=Problems] h1, #problems div[id$=Problems] h2, #problems div[id$=Problems] h3, #problems div[id$=Problems] h4, #problems div[id$=Problems] h5, #problems div[id$=Problems] h6 {
				color: RGB(255,128,0);
			}
			#problems div[id$=Problems] button, #problems div[id$=Problems] input {
				background-color: RGB(255,255,255);
				border: 0.0625vw solid RGB(255,128,0);
			}
			#problems div[id$=Problems] button:hover, #problems div[id$=Problems] input:hover {
				background-color: RGB(230,230,230);
			}
			#problems div[id$=Problems] button:active, #problems div[id$=Problems] input:focus {
				background-color: RGB(200,200,200);
			}
			.problemsTitle {
				font-size: 3vw;
				top: 0;
				left: 0;
			}
			.problemsPrompt {
				font-size: 2vw;
				top: 20%;
				left: 0;
			}
			.problemsResponse {
				font-size: 2vw;
				height: 3vw;
				width: 50%;
				top: calc(40% - 1vw);
				left: 0;
			}
			.problemsSubmitButton {
				font-size: 2vw;
				height: 3vw;
				width: 10%;
				top: calc(40% - 1vw);
				left: 52%;
			}
			.problemsNextButton {
				font-size: 2vw;
				height: 3vw;
				width: 10%;
				top: calc(40% - 1vw);
				left: 64%;
			}
			.problemsCharacterSheet {
				background-color: RGB(255,128,0);
				height: 15.5vh;
				width: 15.5vh;
				bottom: 0;
				right: 0;
			}
			.problemsIncorrect {
				font-size: 2vw;
				top: calc(60% + 1vw);
				left: 0;
			}
			.problemsCharacterSheet > .characterButton {
				background-color: RGB(255,255,255);
				font-size: 3.75vh;
				height: 4.75vh;
				width: 4.75vh;
				position: absolute;
			}
			.cBA {
				top: 0.3125vh;
				left: 2vh;
			}
			.cBE {
				top: 0.3125vh;
				left: 8.75vh;
			}
			.cBI {
				top: 5.375vh;
				left: 2vh;
			}
			.cBO {
				top: 5.375vh;
				left: 8.75vh;
			}
			.cBU {
				top: 10.4375vh;
				left: 2vh;
			}
			.cBN {
				top: 10.4375vh;
				left: 8.75vh;
			}
			#clipboardIntermediary {
				opacity: 0;
				height: 1px;
				width: 1px;
				position: fixed;
				top: 100vh;
				left: 100vw;
			}
		</style>
	</head>
	<body>
		<div id="header">
			<h1 id="title">
				Spanish Future and Conditional Tenses
			</h1>
		</div>
		<div id="data">
			<div id="ratioDiv">
				<p id="ratioCorrect">
					<span id="numberCorrect">0</span>/<span id="numberTotal">0</span> = <span id="percentageCorrect">0</span>%
				</p>
			</div>
		</div>
		<div id="problems">
			<div id="futureConjugationProblems" class="disabled">
				<h1 class="problemsTitle" id="problemsTitleFutureConjugation">
					Future-Tense Conjugation Problems
				</h1>
				<p class="problemsPrompt" id="problemsPromptFutureConjugation">
					Conjugate "<span class="speakable problemsPromptInfinitive" id="problemsPromptInfinitiveFutureConjugation"></span>" for "<span class="speakable problemsPromptSubject" id="problemsPromptSubjectFutureConjugation"></span>" in the future ("<span class="speakable" data-audio="futuro.m4a">futuro</span>") tense
				</p>
				<input class="problemsResponse" id="problemsResponseFutureConjugation">
				</input>
				<button class="problemsSubmitButton" id="problemsSubmitButtonFutureConjugation">
					Submit
				</button>
				<button class="problemsNextButton" id="problemsNextButtonFutureConjugation">
					Next
				</button>
				<p class="problemsIncorrect disabled" id="problemsIncorrectFutureConjugation">
					Answer: "<span class="speakable problemsIncorrectVerb" id="problemsIncorrectVerbFutureConjugation"></span>"
				</p>
				<div class="problemsCharacterSheet" id=""problemsCharacterSheetFutureConjugation">
					<button class="characterButton cBA">
						&#xe1;
					</button>
					<button class="characterButton cBE">
						&#xe9;
					</button>
					<button class="characterButton cBI">
						&#xed;
					</button>
					<button class="characterButton cBO">
						&#xf3;
					</button>
					<button class="characterButton cBU">
						&#xfa;
					</button>
					<button class="characterButton cBN">
						&#xf1;
					</button>
				</div>
			</div>
			<div id="conditionalConjugationProblems" class="disabled">
				<h1 class="problemsTitle" id="problemsTitleConditionalConjugation">
					Conditional-Tense Conjugation Problems
				</h1>
				<p class="problemsPrompt" id="problemsPromptConditionalConjugation">
					Conjugate "<span class="speakable problemsPromptInfinitive" id="problemsPromptInfinitiveConditionalConjugation"></span>" for "<span class="speakable problemsPromptSubject" id="problemsPromptSubjectConditionalConjugation"></span>" in the conditional ("<span class="speakable" data-audio="condicional.m4a">condicional</span>") tense
				</p>
				<input class="problemsResponse" id="problemsResponseConditionalConjugation">
				</input>
				<button class="problemsSubmitButton" id="problemsSubmitButtonConditionalConjugation">
					Submit
				</button>
				<button class="problemsNextButton" id="problemsNextButtonConditionalConjugation">
					Next
				</button>
				<p class="problemsIncorrect disabled" id="problemsIncorrectConditionalConjugation">
					Answer: "<span class="speakable problemsIncorrectVerb" id="problemsIncorrectVerbConditionalConjugation"></span>"
				</p>
				<div class="problemsCharacterSheet" id=""problemsCharacterSheetConditionalConjugation">
					<button class="characterButton cBA">
						&#xe1;
					</button>
					<button class="characterButton cBE">
						&#xe9;
					</button>
					<button class="characterButton cBI">
						&#xed;
					</button>
					<button class="characterButton cBO">
						&#xf3;
					</button>
					<button class="characterButton cBU">
						&#xfa;
					</button>
					<button class="characterButton cBN">
						&#xf1;
					</button>
				</div>
			</div>
			<div id="futureTranslationProblems" class="disabled">
				<h1 class="problemsTitle" id="problemsTitleFutureTranslation">
					Future-Tense Translation Problems
				</h1>
				<p class="problemsPrompt" id="problemsPromptFutureTranslation">
					Translate "<span class="speakable problemsPromptPhrase" id="problemsPromptPhraseFutureTranslation"></span>"
				</p>
				<input class="problemsResponse" id="problemsResponseFutureTranslation">
				</input>
				<button class="problemsSubmitButton" id="problemsSubmitButtonFutureTranslation">
					Submit
				</button>
				<button class="problemsNextButton" id="problemsNextButtonFutureTranslation">
					Next
				</button>
				<p class="problemsIncorrect disabled" id="problemsIncorrectFutureTranslation">
					Answer: "<span class="speakable problemsIncorrectVerb" id="problemsIncorrectVerbFutureTranslation"></span>"
				</p>
				<div class="problemsCharacterSheet" id=""problemsCharacterSheetFutureTranslation">
					<button class="characterButton cBA">
						&#xe1;
					</button>
					<button class="characterButton cBE">
						&#xe9;
					</button>
					<button class="characterButton cBI">
						&#xed;
					</button>
					<button class="characterButton cBO">
						&#xf3;
					</button>
					<button class="characterButton cBU">
						&#xfa;
					</button>
					<button class="characterButton cBN">
						&#xf1;
					</button>
				</div>
			</div>
			<div id="conditionalTranslationProblems" class="disabled">
				<h1 class="problemsTitle" id="problemsTitleConditionalTranslation">
					Conditional-Tense Translation Problems
				</h1>
				<p class="problemsPrompt" id="problemsPromptConditionalTranslation">
					Translate "<span class="speakable problemsPromptPhrase" id="problemsPromptPhraseConditionalTranslation"></span>"
				</p>
				<input class="problemsResponse" id="problemsResponseConditionalTranslation">
				</input>
				<button class="problemsSubmitButton" id="problemsSubmitButtonConditionalTranslation">
					Submit
				</button>
				<button class="problemsNextButton" id="problemsNextButtonConditionalTranslation">
					Next
				</button>
				<p class="problemsIncorrect disabled" id="problemsIncorrectConditionalTranslation">
					Answer: "<span class="speakable problemsIncorrectVerb" id="problemsIncorrectVerbConditionalTranslation"></span>"
				</p>
				<div class="problemsCharacterSheet" id=""problemsCharacterSheetConditionalTranslation">
					<button class="characterButton cBA">
						&#xe1;
					</button>
					<button class="characterButton cBE">
						&#xe9;
					</button>
					<button class="characterButton cBI">
						&#xed;
					</button>
					<button class="characterButton cBO">
						&#xf3;
					</button>
					<button class="characterButton cBU">
						&#xfa;
					</button>
					<button class="characterButton cBN">
						&#xf1;
					</button>
				</div>
			</div>
			<div id="guide">
				<h2>
					Guide
				</h2>
				<h3>
					Conjugating future-tense verbs
				</h3>
				<p>
					To conjugate a verb for a subject in the future tense, you append the respective future-tense subject ending onto the end of the infinitive form of the verb. These endings are "&#xe9;" for "<span class="speakable" data-audio="yo.m4a">yo</span>," "&#xe1;s" for "<span class="speakable" data-audio="tu_.m4a">t&#xfa;</span>," "&#xe1;" for "<span class="speakable" data-audio="e_l-ella-usted.m4a">&#xe9;l/ella/usted</span>," "emos" for "<span class="speakable" data-audio="nosotros.m4a">nosotros</span>," "&#xe9;is" for "<span class="speakable" data-audio="vosotros.m4a">vosotros</span>," and "&#xe1;n" for "<span class="speakable" data-audio="ellos-ellas-ustedes">ellos/ellas/ustedes</span>." When conjugating irregular verbs, each has a special form that is used instead of the infinitive form. The irregular verbs are "<span class="speakable" data-audio="tener.m4a">tener</span>," "<span class="speakable" data-audio="poner.m4a">poner</span>," "<span class="speakable" data-audio="valer.m4a">valer</span>," "<span class="speakable" data-audio="salir.m4a">salir</span>," "<span class="speakable" data-audio="venir.m4a">venir</span>," "<span class="speakable" data-audio="poder.m4a">poder</span>," "<span class="speakable" data-audio="caber.m4a">caber</span>," "<span class="speakable" data-audio="haber.m4a">haber</span>," "<span class="speakable" data-audio="saber.m4a">saber</span>," "<span class="speakable" data-audio="querer.m4a">querer</span>," "<span class="speakable" data-audio="decir.m4a">decir</span>," and "<span class="speakable" data-audio="hacer.m4a">hacer</span>," and have the unique forms of "tendr," "pondr," "valdr," "saldr," "vendr," "podr," "cabr," "habr," "sabr," "querr," "dir," and "har," respectively.
				</p>
				<h3>
					Conjugating conditional-tense verbs
				</h3>
				<p>
					For the conditional tense, the method of conjugation and irregulars are the same as the future tense, except for the different subject endings. The different subject endings are "&#xed;a" for "<span class="speakable" data-audio="yo.m4a">yo</span>," "&#xed;as" for "<span class="speakable" data-audio="tu_.m4a">t&#xfa;</span>," "&#xed;a" for "<span class="speakable" data-audio="e_l-ella-usted.m4a">&#xe9;l/ella/usted</span>," "&#xed;amos" for "<span class="speakable" data-audio="nosotros.m4a">nosotros</span>," "&#xed;ais" for "<span class="speakable" data-audio="vosotros.m4a">vosotros</span>," and "&#xed;an" for "<span class="speakable" data-audio="ellos-ellas-ustedes">ellos/ellas/ustedes</span>."
				</p>
				<h3>
					Using the website
				</h3>
				<h4>
					Selecting the problem type
				</h4>
				<p>
					The area for problem-type selection is located at the bottom-right corner of the webpage. To select a problem type, click the button labeled with "select" followed by the problem type. The available problem types are future-tense conjugation, conditional-tense conjugation, future-tense translation, and conditional-tense translation. You can also view the guide (which is this section) by clicking the button in this area labeled "view guide."
				</p>
				<h4>
					Conjugation problems
				</h4>
				<p>
					For conjugation problems, the prompt will display an infinitive verb and a subject, which must be conjugated for the given tense of the problem type. Your answer is typed into the input field, and is submitted by clicking the "submit" button to the right of the input field. If the answer is incorrect, the correct answer will be displayed below the input field. The "next" button is used to generate another problem of the same problem type or to skip the current problem. Clicking the "submit" button only works once before clicking the "next" button. Skipping a problem does not affect your score.
				</p>
				<h4>
					Translation problems
				</h4>
				<p>
					For translation problems, the prompt will either display a conjugated Spanish verb, or an English sentence that can be translated to a conjugated Spanish verb; the prompt must be translated to the opposite language. When translating to English, the phrases "will," "would/could," "I," "you," "he/she/it," "they," "we," and "you all" should be used. Examples of translations are "<span class="speakable" data-audio="tener-condicional-e_l-ella-usted.m4a">tendr&#xed;a</span>" and "he/she/it would/could have." The other aspects of the translation problem types are identical to those of the conjugation problem types.
				</p>
				<h4>
					Speakable words
				</h4>
				<p>
					Speakable words are highlighted in a transparent blue color, indicating that they are speakable words. You can click a speakable word to listen to audio of the word being spoken, during which the blue highlighting becomes fully opaque. The following is an example of a speakable word: <span class="speakable" data-audio="tener-condicional-e_l-ella-usted.m4a">tendr&#xed;a</span>
				</p>
				<h4>
					Accented characters
				</h4>
				<p>
					The character-sheet of accented characters is located near the bottom-right corner of the webpage, above the section for selecting the problem type. Clicking a button labeled with a character copies that character to the clipboard, which can then be pasted (via Control + C for Windows and Linux, and Command + C for Mac OS X) into the input field. You can also type/paste/etc. accented characters into the input field yourself through any other method.
				</p>
				<h4>
					Score
				</h4>
				<p>
					Your score is shown near the top of the webpage, displayed as the unsimplified ratio of the number problems answered correctly to the number of problems attempted. The ratio is also shown as a percentage. The score can be reset by refreshing the webpage.
				</p>
				<h3>
					Creators
				</h3>
				<h4>
					McCain Potasky
				</h4>
				<p>
					Web development
					<br>
					</br>
					Guide writing
				</p>
				<h4>
					Ian Santana
				</h4>
				<p>
					Spanish audio recordings
				</p>
			</div>
		</div>
		<div id="configuration">
			<button id="selectFutureConjugationProblems" data-problemtype="futureConjugation">
				Select Future-Tense Conjugation Problems
			</button>
			<button id="selectConditionalConjugationProblems" data-problemtype="conditionalConjugation">
				Select Conditional-Tense Conjugation Problems
			</button>
			<button id="selectFutureTranslationProblems" data-problemtype="futureTranslation">
				Select Future-Tense Translation Problems
			</button>
			<button id="selectConditionalTranslationProblems" data-problemtype="conditionalTranslation">
				Select Conditional-Tense Translation Problems
			</button>
			<button id="viewGuide" data-problemtype="guide">
				View Guide
			</button>
		</div>
		<div id="audioContainer">
			<audio src="audio/futuro.m4a">
			</audio>
			<audio src="audio/condicional.m4a">
			</audio>
			<audio src="audio/yo.m4a">
			</audio>
			<audio src="audio/e_l-ella-usted.m4a">
			</audio>
			<audio src="audio/ellos-ellas-ustedes.m4a">
			</audio>
			<audio src="audio/tu_.m4a">
			</audio>
			<audio src="audio/nosotros.m4a">
			</audio>
			<audio src="audio/vosotros.m4a">
			</audio>
		</div>
		<textarea readonly="true" id="clipboardIntermediary">
		</textarea>
	</body>
	<script>
		//Error handling
		window.onerror = function(message, src, lineN, columnN, error) {
			console.log("Error: " + message + " - " + src + ", Line " + lineN + ", Column " + columnN);
		};
		function selectProblemType(e) {
			var enabledProblem = e.target.dataset.problemtype;
			if (e.target.dataset.problemtype !== "guide") {
				enabledProblem += "Problems";
			};
			var problems = document.getElementById("problems").children;
			for (var i = 0; i < problems.length; i++) {
				if (problems[i].id !== enabledProblem) {
					problems[i].classList.add("disabled");
				} else {
					problems[i].classList.remove("disabled");
				};
			};
			if (enabledProblem === "futureConjugationProblems") {
				futureConjugation();
			} else if (enabledProblem === "conditionalConjugationProblems") {
				conditionalConjugation();
			} else if (enabledProblem === "futureTranslationProblems") {
				futureTranslation();
			} else if (enabledProblem === "conditionalTranslationProblems") {
				conditionalTranslation();
			};
		};
		var buttons = document.getElementById("configuration").children;
		for (var i = 0; i < buttons.length; i++) {
			buttons[i].addEventListener("click", selectProblemType);
		};
		var characterButtons = document.getElementsByClassName("characterButton");
		var clipboardIntermediary = document.getElementById("clipboardIntermediary");
		for (var i = 0; i < characterButtons.length; i++) {
			characterButtons[i].addEventListener("click", function(e) {
				clipboardIntermediary.value = /\S+/.exec(e.target.innerHTML)[0];
				window.getSelection().removeAllRanges();
				clipboardIntermediary.select();
				document.execCommand("copy");
			});
		};
		var verbs = ["tener","poner","valer","salir","venir","poder","caber","haber","saber","querer","decir","hacer","abrir","correr","dar","jugar","llegar","llamar","leer","ir","hablar","vivir","ver","tomar","trabajar","ser","empezar","pagar","mirar","llevar","creer","deber"];
		var irregularBoundaryIndex = 11;
		var irregulars = ["tendr","pondr","valdr","saldr","vendr","podr","cabr","habr","sabr","querr","dir","har"];
		//var subjects = ["yo","t&#xfa;","&#xe9;l/ella/usted","nosotros","vosotros","ellos/ellas/ustedes"];
		var subjects = ["yo","t\xfa","\xe9l/ella/usted","nosotros","vosotros","ellos/ellas/ustedes"];
		var subjectsEnglish = ["I","you","he/she/it","we","you all","they"];
		//var subjectEndingsFuture = ["&#xe9;","&#xe1;s","&#xe1;","emos","&#xe9;is","&#xe1;n"];
		var subjectEndingsFuture = ["\xe9","\xe1s","\xe1","emos","\xe9is","\xe1n"];
		//var subjectEndingsConditional = ["&#xed;a","&#xed;as","&#xed;a","&#xed;amos","&#xed;ais","&#xed;an"];
		var subjectEndingsConditional = ["\xeda","\xedas","\xeda","\xedamos","\xedais","\xedan"];
		var englishVerbTranslations = ["have","put","be worth","leave","come","be able to","fit","have","know","want","say","do","open","run","give","play","arrive","call","read","go","speak","live","see","take","work","be","begin","pay","watch","take","believe","owe"];
		//var sanitizedCharacters = [["a&#x301;","&#xe1;"],["e&#x301;","&#xe9;"],["i&#x301;","&#xed;"],["o&#x301;","&#xf3;"],["u&#x301;","&#xfa;"],["A&#x301;","&#xe1;"],["E&#x301;","&#xe9;"],["I&#x301;","&#xed;"],["O&#x301;","&#xf3;"],["U&#x301;","&#xfa;"],["&#xc1;","&#xe1;"],["&#xc9;","&#xe9;"],["&#xcd;","&#xed;"],["&#xd3;","&#xf3;"],["&#xda;","&#xfa;"],["A","a"],["B","b"],["C","c"],["D","d"],["E","e"],["F","f"],["G","g"],["H","h"],["I","i"],["J","j"],["K","k"],["L","l"],["M","m"],["N","n"],["O","o"],["P","p"],["Q","q"],["R","r"],["S","s"],["T","t"],["U","u"],["V","v"],["W","w"],["X","x"],["Y","y"],["Z","z"]];
		var sanitizedCharacters = [["a\u0301","\xe1"],["e\u0301","\xe9"],["i\u0301","\xed"],["o\u0301","\xf3"],["u\u0301","\xfa"],["A\u0301","\xe1"],["E\u0301","\xe9"],["I\u0301","\xed"],["O\u0301","\xf3"],["U\u0301","\xfa"],["\xc1","\xe1"],["\xc9","\xe9"],["\xcd","\xed"],["\xd3","\xf3"],["\xda","\xfa"],["A","a"],["B","b"],["C","c"],["D","d"],["E","e"],["F","f"],["G","g"],["H","h"],["I","i"],["J","j"],["K","k"],["L","l"],["M","m"],["N","n"],["O","o"],["P","p"],["Q","q"],["R","r"],["S","s"],["T","t"],["U","u"],["V","v"],["W","w"],["X","x"],["Y","y"],["Z","z"]];
		function randomVerb(tense, infinitive, subject, conjugation, englishTranslation, infinitiveEnglishTranslation) {
			/*
			Input/Output = {tense, infinitive, subject, conjugation, englishTranslation, infinitiveEnglishTranslation}
			
			tense:
				Input: Number; tense to be used
				Output: Number; tense used
				tense = 0 -> future
				tense = 1 -> conditional
			infinitive:
				Input: Boolean; if the infinitive should be returned
				Output: String; verb infinitive
					If input = false, an empty string is returned
			subject:
				Input: Boolean; if the subject should be returned
				Output: String; subject
					If input = false, an empty string is returned
			conjugation:
				Input: Boolean; if the conjugated verb should be returned
				Output: String; the conjugated verb
					If input = false, an empty string is returned
			englishTranslation:
				Input: Boolean; if the English translation of the conjugated verb should be returned
				Output: String; the English translation of the conjugated verb
					If input = false, an empty string is returned
			infinitiveEnglishTranslation:
				Input: Boolean; if the English translation of the verb infinitive should be returned
				Output: String; the English translations of the verb infinitive, without the "to" prefix
					If input = false, an empty string is returned
			*/
			var data = [tense, "", "", "", "", ""];
			var subjectNumber = Math.round(Math.random() * 5);
			if (subject) {
				data[2] = subjects[subjectNumber];	
			};
			if (infinitive || conjugation || englishTranslation || infinitiveEnglishTranslation) {
				var verbNumber = 0;
				var regular = true;
				if (Math.random() < 0.25) {
					verbNumber = Math.round(Math.random() * irregulars.length);
					regular = false;
				} else {
					verbNumber = Math.round(Math.random() * (verbs.length - irregularBoundaryIndex - 2)) + irregularBoundaryIndex + 1
				};
				if (infinitive) {
					data[1] = verbs[verbNumber];
				};
				if (infinitiveEnglishTranslation) {
					data[5] = englishVerbTranslations[verbNumber];
				};
				if (conjugation) {
					var verb = "";
					if (regular) {
						verb = verbs[verbNumber];
					} else {
						verb = irregulars[verbNumber];
					};
					if (tense === 0) {
						verb += subjectEndingsFuture[subjectNumber];
					} else {
						verb += subjectEndingsConditional[subjectNumber];
					};
					data[3] = verb;
				};
				if (englishTranslation) {
					var tensePhrase = "";
					if (tense === 0) {
						tensePhrase = "will";
					} else {
						tensePhrase = "would/could";
					};
					data[4] = subjectsEnglish[subjectNumber] + " " + tensePhrase + " " + englishVerbTranslations[verbNumber];
				};
			};
			return data;
		};
		function inputSanitization(input) {
			var sanitized = input;
			for (var i = 0; i < sanitizedCharacters.length; i++) {
				sanitized = sanitized.replace(new RegExp(sanitizedCharacters[i][0], "g"), sanitizedCharacters[i][1]);
			};
			return sanitized;
		};
		//Adding <audio> elements for the infinitives and conjugation permutations of the verbs
		var audioContainer = document.getElementById("audioContainer");
		var audioFileType = "m4a";
		var characterSubstitutionsSubjects = [["\/","-"],["\xe1","a_"],["\xe9","e_"],["\xed","i_"],["\xf3","o_"],["\xfa","u_"],["\xf1","n_"]];
		var characterSubstitutionsPost = [["\xe1","a_"],["\xe9","e_"],["\xed","i_"],["\xf3","o_"],["\xfa","u_"],["\xf1","n_"]];
		for (var i = 0; i < verbs.length; i++) {
			var audioElement = document.createElement("audio");
			audioElement.src = "audio/" + verbs[i] + "." + audioFileType;
			audioContainer.appendChild(audioElement);
			for (var j = 0; j < 6; j++) {
				var subject = subjects[j];
				for (var k = 0; k < characterSubstitutionsSubjects.length; k++) {
					subject = subject.replace(new RegExp(characterSubstitutionsSubjects[k][0], "g"), characterSubstitutionsSubjects[k][1]);
				};
				var srcString = "";
				var audioElement = document.createElement("audio");
				srcString = "audio/" + verbs[i] + "-futuro-" + subject + "." + audioFileType;
				for (var k = 0; k < characterSubstitutionsPost.length; k++) {
					srcString = srcString.replace(new RegExp(characterSubstitutionsPost[k][0], "g"), characterSubstitutionsPost[k][1]);
				};
				audioElement.src = srcString;
				audioContainer.appendChild(audioElement);
				var audioElement = document.createElement("audio");
				srcString = "audio/" + verbs[i] + "-condicional-" + subject + "." + audioFileType;
				for (var k = 0; k < characterSubstitutionsPost.length; k++) {
					srcString = srcString.replace(new RegExp(characterSubstitutionsPost[k][0], "g"), characterSubstitutionsPost[k][1]);
				};
				audioElement.src = srcString;
				audioContainer.appendChild(audioElement);
			};
		};
		function convertToAudioFilename(config, verb, tense, subject) {
			/*
			config = 0 -> conjugated verb
			config = 1 -> infinitive verb
			config = 2 -> subject
			*/
			var fileString = "";
			if (config === 0) {
				for (var i = 0; i < characterSubstitutionsSubjects.length; i++) {
					verb = verb.replace(new RegExp(characterSubstitutionsSubjects[i][0], "g"), characterSubstitutionsSubjects[i][1]);
				};
				for (var i = 0; i < characterSubstitutionsSubjects.length; i++) {
					subject = subject.replace(new RegExp(characterSubstitutionsSubjects[i][0], "g"), characterSubstitutionsSubjects[i][1]);
				};
			} else if (config === 1) {
				for (var i = 0; i < characterSubstitutionsSubjects.length; i++) {
					verb = verb.replace(new RegExp(characterSubstitutionsSubjects[i][0], "g"), characterSubstitutionsSubjects[i][1]);
				};
			} else {
				for (var i = 0; i < characterSubstitutionsSubjects.length; i++) {
					subject = subject.replace(new RegExp(characterSubstitutionsSubjects[i][0], "g"), characterSubstitutionsSubjects[i][1]);
				};
			};
			if (config === 0) {
				var tenseString = "";
				if (tense === 0) {
					tenseString = "futuro";
				} else {
					tenseString = "condicional";
				};
				fileString = verb + "-" + tenseString + "-" + subject;
			} else if (config === 1) {
				fileString = verb;
			} else {
				fileString = subject;
			};
			return fileString + "." + audioFileType;
		};
		//Defining the function that occurs when an element with a class of "speakable" is clicked, and adding a "click" event listener that refers to that function on all elements with a class of "speakable"
		function speak(e) {
			var element = e.target;
			if (element.classList.contains("speakable")) {
				element.classList.add("spoken");
				for (var i = 0; i < audioContainer.children.length; i++) {
					var audioFileElement = audioContainer.children[i];
					if (new RegExp("audio\\/" + element.dataset.audio.slice(0, -1 * (audioFileType.length + 1)) + "\\." + audioFileType).test(audioFileElement.src)) {
						audioFileElement.addEventListener("ended", function() {
							element.classList.remove("spoken");
						});
						var promise = audioFileElement.play();
						break;
					};
				};
			};
		};
		var speakableElements = document.getElementsByClassName("speakable");
		for (var i = 0; i < speakableElements.length; i++) {
			speakableElements[i].addEventListener("click", speak);
		};
		var score = [0, 0];
		var numberCorrect = document.getElementById("numberCorrect");
		var numberTotal = document.getElementById("numberTotal");
		var percentageCorrect = document.getElementById("percentageCorrect");
		function updateScore(numeratorIncrease, denominatorIncrease, numeratorDefinition, denominatorDefinition) {
			if (numeratorDefinition === null) {
				score[0] += numeratorIncrease;
			} else {
				score[0] = numeratorDefinition;
			};
			if (denominatorDefinition === null) {
				score[1] += denominatorIncrease;
			} else {
				score[1] = denominatorDefinition;
			};
			numberCorrect.innerHTML = score[0];
			numberTotal.innerHTML = score[1];
			percentageCorrect.innerHTML = Math.round(100 * score[0] / score[1]);
		};
		var submitable = true;
		var verbData = [];
		var futureConjugationSolution = "";
		function futureConjugation() {
			document.getElementById("problemsIncorrectFutureConjugation").classList.add("disabled");
			document.getElementById("problemsResponseFutureConjugation").value = "";
			submitable = true;
			verbData = randomVerb(0, true, true, true, false, false);
			futureConjugationSolution = verbData[3];
			var problemsPromptInfinitiveFutureConjugation = document.getElementById("problemsPromptInfinitiveFutureConjugation");
			var problemsPromptSubjectFutureConjugation = document.getElementById("problemsPromptSubjectFutureConjugation");
			problemsPromptInfinitiveFutureConjugation.innerHTML = verbData[1];
			problemsPromptSubjectFutureConjugation.innerHTML = verbData[2];
			problemsPromptInfinitiveFutureConjugation.dataset.audio = convertToAudioFilename(1, verbData[1], verbData[0], verbData[2]);
			problemsPromptSubjectFutureConjugation.dataset.audio = convertToAudioFilename(2, verbData[1], verbData[0], verbData[2]);
		};
		document.getElementById("problemsSubmitButtonFutureConjugation").addEventListener("click", function() {
			if (submitable && inputSanitization(document.getElementById("problemsResponseFutureConjugation").value) === futureConjugationSolution) {
				updateScore(1, 1, null, null);
			} else if (submitable) {
				updateScore(0, 1, null, null);
				var problemsIncorrectVerbFutureConjugation = document.getElementById("problemsIncorrectVerbFutureConjugation");
				problemsIncorrectVerbFutureConjugation.innerHTML = futureConjugationSolution;
				problemsIncorrectVerbFutureConjugation.dataset.audio = convertToAudioFilename(0, verbData[1], verbData[0], verbData[2]);
				document.getElementById("problemsIncorrectFutureConjugation").classList.remove("disabled");
			};
			submitable = false;
		});
		document.getElementById("problemsNextButtonFutureConjugation").addEventListener("click", function() {
			futureConjugation();
		});
		var conditionalConjugationSolution = "";
		function conditionalConjugation() {
			document.getElementById("problemsIncorrectConditionalConjugation").classList.add("disabled");
			document.getElementById("problemsResponseConditionalConjugation").value = "";
			submitable = true;
			verbData = randomVerb(1, true, true, true, false, false);
			conditionalConjugationSolution = verbData[3];
			var problemsPromptInfinitiveConditionalConjugation = document.getElementById("problemsPromptInfinitiveConditionalConjugation");
			var problemsPromptSubjectConditionalConjugation = document.getElementById("problemsPromptSubjectConditionalConjugation");
			problemsPromptInfinitiveConditionalConjugation.innerHTML = verbData[1];
			problemsPromptSubjectConditionalConjugation.innerHTML = verbData[2];
			problemsPromptInfinitiveConditionalConjugation.dataset.audio = convertToAudioFilename(1, verbData[1], verbData[0], verbData[2]);
			problemsPromptSubjectConditionalConjugation.dataset.audio = convertToAudioFilename(2, verbData[1], verbData[0], verbData[2]);
		};
		document.getElementById("problemsSubmitButtonConditionalConjugation").addEventListener("click", function() {
			if (submitable && inputSanitization(document.getElementById("problemsResponseConditionalConjugation").value) === conditionalConjugationSolution) {
				updateScore(1, 1, null, null);
			} else if (submitable) {
				updateScore(0, 1, null, null);
				var problemsIncorrectVerbConditionalConjugation = document.getElementById("problemsIncorrectVerbConditionalConjugation");
				problemsIncorrectVerbConditionalConjugation.innerHTML = conditionalConjugationSolution;
				problemsIncorrectVerbConditionalConjugation.dataset.audio = convertToAudioFilename(0, verbData[1], verbData[0], verbData[2]);
				document.getElementById("problemsIncorrectConditionalConjugation").classList.remove("disabled");
			};
			submitable = false;
		});
		document.getElementById("problemsNextButtonConditionalConjugation").addEventListener("click", function() {
			conditionalConjugation();
		});
		var direction = 0;
		var futureTranslationSolution = "";
		function futureTranslation() {
			document.getElementById("problemsIncorrectFutureTranslation").classList.add("disabled");
			document.getElementById("problemsResponseFutureTranslation").value = "";
			submitable = true;
			direction = Math.round(Math.random());
			/*
			direction = 0 -> Spanish to English
			direction = 1 -> English to Spanish
			*/
			verbData = randomVerb(0, true, true, true, true, false);
			if (direction === 0) {
				futureTranslationSolution = verbData[4];
			} else {
				futureTranslationSolution = verbData[3];
			};
			var problemsPromptPhraseFutureTranslation = document.getElementById("problemsPromptPhraseFutureTranslation");
			if (direction === 0) {
				problemsPromptPhraseFutureTranslation.innerHTML = verbData[3];
				problemsPromptPhraseFutureTranslation.dataset.audio = convertToAudioFilename(0, verbData[1], verbData[0], verbData[2]);
				problemsPromptPhraseFutureTranslation.classList.add("speakable");
			} else {
				problemsPromptPhraseFutureTranslation.innerHTML = verbData[4];
				problemsPromptPhraseFutureTranslation.dataset.audio = "";
				problemsPromptPhraseFutureTranslation.classList.remove("speakable");
			};
		};
		document.getElementById("problemsSubmitButtonFutureTranslation").addEventListener("click", function() {
			if (submitable && inputSanitization(document.getElementById("problemsResponseFutureTranslation").value) === futureTranslationSolution) {
				updateScore(1, 1, null, null);
			} else if (submitable) {
				updateScore(0, 1, null, null);
				var problemsIncorrectVerbFutureTranslation = document.getElementById("problemsIncorrectVerbFutureTranslation");
				problemsIncorrectVerbFutureTranslation.innerHTML = futureTranslationSolution;
				if (direction === 0) {
					problemsIncorrectVerbFutureTranslation.dataset.audio = "";
					problemsIncorrectVerbFutureTranslation.classList.remove("speakable");
				} else {
					problemsIncorrectVerbFutureTranslation.dataset.audio = convertToAudioFilename(0, verbData[1], verbData[0], verbData[2]);
					problemsIncorrectVerbFutureTranslation.classList.add("speakable");
				};
				document.getElementById("problemsIncorrectFutureTranslation").classList.remove("disabled");
			};
			submitable = false;
		});
		document.getElementById("problemsNextButtonFutureTranslation").addEventListener("click", function() {
			futureTranslation();
		});
		
		var conditionalTranslationSolution = "";
		function conditionalTranslation() {
			document.getElementById("problemsIncorrectConditionalTranslation").classList.add("disabled");
			document.getElementById("problemsResponseConditionalTranslation").value = "";
			submitable = true;
			direction = Math.round(Math.random());
			/*
			direction = 0 -> Spanish to English
			direction = 1 -> English to Spanish
			*/
			verbData = randomVerb(1, true, true, true, true, false);
			if (direction === 0) {
				conditionalTranslationSolution = verbData[4];
			} else {
				conditionalTranslationSolution = verbData[3];
			};
			var problemsPromptPhraseConditionalTranslation = document.getElementById("problemsPromptPhraseConditionalTranslation");
			if (direction === 0) {
				problemsPromptPhraseConditionalTranslation.innerHTML = verbData[3];
				problemsPromptPhraseConditionalTranslation.dataset.audio = convertToAudioFilename(0, verbData[1], verbData[0], verbData[2]);
				problemsPromptPhraseConditionalTranslation.classList.add("speakable");
			} else {
				problemsPromptPhraseConditionalTranslation.innerHTML = verbData[4];
				problemsPromptPhraseConditionalTranslation.dataset.audio = "";
				problemsPromptPhraseConditionalTranslation.classList.remove("speakable");
			};
		};
		document.getElementById("problemsSubmitButtonConditionalTranslation").addEventListener("click", function() {
			if (submitable && inputSanitization(document.getElementById("problemsResponseConditionalTranslation").value) === conditionalTranslationSolution) {
				updateScore(1, 1, null, null);
			} else if (submitable) {
				updateScore(0, 1, null, null);
				var problemsIncorrectVerbConditionalTranslation = document.getElementById("problemsIncorrectVerbConditionalTranslation");
				problemsIncorrectVerbConditionalTranslation.innerHTML = conditionalTranslationSolution;
				if (direction === 0) {
					problemsIncorrectVerbConditionalTranslation.dataset.audio = "";
					problemsIncorrectVerbConditionalTranslation.classList.remove("speakable");
				} else {
					problemsIncorrectVerbConditionalTranslation.dataset.audio = convertToAudioFilename(0, verbData[1], verbData[0], verbData[2]);
					problemsIncorrectVerbConditionalTranslation.classList.add("speakable");
				};
				document.getElementById("problemsIncorrectConditionalTranslation").classList.remove("disabled");
			};
			submitable = false;
		});
		document.getElementById("problemsNextButtonConditionalTranslation").addEventListener("click", function() {
			conditionalTranslation();
		});
	</script>
</html>
